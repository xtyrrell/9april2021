{"ast":null,"code":"/**\n * Copyright 2020 Vercel Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { useEffect } from 'react';\nimport { useRouter } from 'next/router';\n/**\n * If `paramName` exists in query string, then call `setEmail()` with the value\n * and delete it from the URL.\n */\n\nexport default function useEmailQueryParam(paramName, setEmail) {\n  const router = useRouter();\n  useEffect(() => {\n    if ('URLSearchParams' in window) {\n      const {\n        search,\n        pathname\n      } = window.location;\n      const params = new URLSearchParams(search);\n      const email = params.get(paramName);\n\n      if (email) {\n        setEmail(email);\n        params.delete(paramName);\n        const newSearch = params.toString();\n        const newAsPath = pathname + (newSearch ? `?${newSearch}` : '');\n        const newPathname = router.pathname + (newSearch ? `?${newSearch}` : '');\n        history.replaceState({\n          url: newPathname,\n          as: newAsPath,\n          options: {\n            shallow: true\n          }\n        }, '', newAsPath);\n      }\n    }\n  }, [setEmail, router.pathname, paramName]);\n}","map":{"version":3,"sources":["/Users/shai/9april2021/lib/hooks/use-email-query-param.ts"],"names":["useEffect","useRouter","useEmailQueryParam","paramName","setEmail","router","window","search","pathname","location","params","URLSearchParams","email","get","delete","newSearch","toString","newAsPath","newPathname","history","replaceState","url","as","options","shallow"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA,SAASA,SAAT,QAA0B,OAA1B;AACA,SAASC,SAAT,QAA0B,aAA1B;AAEA;AACA;AACA;AACA;;AACA,eAAe,SAASC,kBAAT,CACbC,SADa,EAEbC,QAFa,EAGb;AACA,QAAMC,MAAM,GAAGJ,SAAS,EAAxB;AACAD,EAAAA,SAAS,CAAC,MAAM;AACd,QAAI,qBAAqBM,MAAzB,EAAiC;AAC/B,YAAM;AAAEC,QAAAA,MAAF;AAAUC,QAAAA;AAAV,UAAuBF,MAAM,CAACG,QAApC;AACA,YAAMC,MAAM,GAAG,IAAIC,eAAJ,CAAoBJ,MAApB,CAAf;AACA,YAAMK,KAAK,GAAGF,MAAM,CAACG,GAAP,CAAWV,SAAX,CAAd;;AACA,UAAIS,KAAJ,EAAW;AACTR,QAAAA,QAAQ,CAACQ,KAAD,CAAR;AACAF,QAAAA,MAAM,CAACI,MAAP,CAAcX,SAAd;AACA,cAAMY,SAAS,GAAGL,MAAM,CAACM,QAAP,EAAlB;AACA,cAAMC,SAAS,GAAGT,QAAQ,IAAIO,SAAS,GAAI,IAAGA,SAAU,EAAjB,GAAqB,EAAlC,CAA1B;AACA,cAAMG,WAAW,GAAGb,MAAM,CAACG,QAAP,IAAmBO,SAAS,GAAI,IAAGA,SAAU,EAAjB,GAAqB,EAAjD,CAApB;AACAI,QAAAA,OAAO,CAACC,YAAR,CACE;AAAEC,UAAAA,GAAG,EAAEH,WAAP;AAAoBI,UAAAA,EAAE,EAAEL,SAAxB;AAAmCM,UAAAA,OAAO,EAAE;AAAEC,YAAAA,OAAO,EAAE;AAAX;AAA5C,SADF,EAEE,EAFF,EAGEP,SAHF;AAKD;AACF;AACF,GAlBQ,EAkBN,CAACb,QAAD,EAAWC,MAAM,CAACG,QAAlB,EAA4BL,SAA5B,CAlBM,CAAT;AAmBD","sourcesContent":["/**\n * Copyright 2020 Vercel Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { useEffect } from 'react';\nimport { useRouter } from 'next/router';\n\n/**\n * If `paramName` exists in query string, then call `setEmail()` with the value\n * and delete it from the URL.\n */\nexport default function useEmailQueryParam(\n  paramName: string,\n  setEmail: (email: string) => unknown\n) {\n  const router = useRouter();\n  useEffect(() => {\n    if ('URLSearchParams' in window) {\n      const { search, pathname } = window.location;\n      const params = new URLSearchParams(search);\n      const email = params.get(paramName);\n      if (email) {\n        setEmail(email);\n        params.delete(paramName);\n        const newSearch = params.toString();\n        const newAsPath = pathname + (newSearch ? `?${newSearch}` : '');\n        const newPathname = router.pathname + (newSearch ? `?${newSearch}` : '');\n        history.replaceState(\n          { url: newPathname, as: newAsPath, options: { shallow: true } },\n          '',\n          newAsPath\n        );\n      }\n    }\n  }, [setEmail, router.pathname, paramName]);\n}\n"]},"metadata":{},"sourceType":"module"}