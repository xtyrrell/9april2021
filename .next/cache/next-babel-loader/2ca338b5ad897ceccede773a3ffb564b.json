{"ast":null,"code":"/**\n * Copyright 2020 Vercel Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport * as agilityApi from './cms-providers/agility';\nimport * as datoCmsApi from './cms-providers/dato';\nimport * as contentfulApi from './cms-providers/contentful';\nimport * as prismicApi from './cms-providers/prismic';\nimport * as storyblokApi from './cms-providers/storyblok';\nlet cmsApi;\n\nif (process.env.DATOCMS_READ_ONLY_API_TOKEN) {\n  cmsApi = datoCmsApi;\n} else if (process.env.CONTENTFUL_ACCESS_TOKEN && process.env.CONTENTFUL_SPACE_ID) {\n  cmsApi = contentfulApi;\n} else if (process.env.STORYBLOK_PREVIEW_TOKEN) {\n  cmsApi = storyblokApi;\n} else if (process.env.PRISMIC_REPO_ID) {\n  cmsApi = prismicApi;\n} else if (process.env.AGILITY_GUID && process.env.AGILITY_API_FETCH_KEY && process.env.AGILITY_API_PREVIEW_KEY) {\n  cmsApi = agilityApi;\n} else {\n  cmsApi = {\n    getAllSpeakers: async () => [],\n    getAllStages: async () => [],\n    getAllSponsors: async () => [],\n    getAllJobs: async () => []\n  };\n}\n\nexport async function getAllSpeakers() {\n  return cmsApi.getAllSpeakers();\n}\nexport async function getAllStages() {\n  return cmsApi.getAllStages();\n}\nexport async function getAllSponsors() {\n  return cmsApi.getAllSponsors();\n}\nexport async function getAllJobs() {\n  return cmsApi.getAllJobs();\n}","map":{"version":3,"sources":["/Users/shai/9april2021/lib/cms-api.ts"],"names":["agilityApi","datoCmsApi","contentfulApi","prismicApi","storyblokApi","cmsApi","process","env","DATOCMS_READ_ONLY_API_TOKEN","CONTENTFUL_ACCESS_TOKEN","CONTENTFUL_SPACE_ID","STORYBLOK_PREVIEW_TOKEN","PRISMIC_REPO_ID","AGILITY_GUID","AGILITY_API_FETCH_KEY","AGILITY_API_PREVIEW_KEY","getAllSpeakers","getAllStages","getAllSponsors","getAllJobs"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAGA,OAAO,KAAKA,UAAZ,MAA4B,yBAA5B;AACA,OAAO,KAAKC,UAAZ,MAA4B,sBAA5B;AACA,OAAO,KAAKC,aAAZ,MAA+B,4BAA/B;AACA,OAAO,KAAKC,UAAZ,MAA4B,yBAA5B;AACA,OAAO,KAAKC,YAAZ,MAA8B,2BAA9B;AAEA,IAAIC,MAAJ;;AAOA,IAAIC,OAAO,CAACC,GAAR,CAAYC,2BAAhB,EAA6C;AAC3CH,EAAAA,MAAM,GAAGJ,UAAT;AACD,CAFD,MAEO,IAAIK,OAAO,CAACC,GAAR,CAAYE,uBAAZ,IAAuCH,OAAO,CAACC,GAAR,CAAYG,mBAAvD,EAA4E;AACjFL,EAAAA,MAAM,GAAGH,aAAT;AACD,CAFM,MAEA,IAAII,OAAO,CAACC,GAAR,CAAYI,uBAAhB,EAAyC;AAC9CN,EAAAA,MAAM,GAAGD,YAAT;AACD,CAFM,MAEA,IAAIE,OAAO,CAACC,GAAR,CAAYK,eAAhB,EAAiC;AACtCP,EAAAA,MAAM,GAAGF,UAAT;AACD,CAFM,MAEA,IACLG,OAAO,CAACC,GAAR,CAAYM,YAAZ,IACAP,OAAO,CAACC,GAAR,CAAYO,qBADZ,IAEAR,OAAO,CAACC,GAAR,CAAYQ,uBAHP,EAIL;AACAV,EAAAA,MAAM,GAAGL,UAAT;AACD,CANM,MAMA;AACLK,EAAAA,MAAM,GAAG;AACPW,IAAAA,cAAc,EAAE,YAAY,EADrB;AAEPC,IAAAA,YAAY,EAAE,YAAY,EAFnB;AAGPC,IAAAA,cAAc,EAAE,YAAY,EAHrB;AAIPC,IAAAA,UAAU,EAAE,YAAY;AAJjB,GAAT;AAMD;;AAED,OAAO,eAAeH,cAAf,GAAoD;AACzD,SAAOX,MAAM,CAACW,cAAP,EAAP;AACD;AAED,OAAO,eAAeC,YAAf,GAAgD;AACrD,SAAOZ,MAAM,CAACY,YAAP,EAAP;AACD;AAED,OAAO,eAAeC,cAAf,GAAoD;AACzD,SAAOb,MAAM,CAACa,cAAP,EAAP;AACD;AAED,OAAO,eAAeC,UAAf,GAA4C;AACjD,SAAOd,MAAM,CAACc,UAAP,EAAP;AACD","sourcesContent":["/**\n * Copyright 2020 Vercel Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { Job, Sponsor, Stage, Speaker } from '@lib/types';\n\nimport * as agilityApi from './cms-providers/agility';\nimport * as datoCmsApi from './cms-providers/dato';\nimport * as contentfulApi from './cms-providers/contentful';\nimport * as prismicApi from './cms-providers/prismic';\nimport * as storyblokApi from './cms-providers/storyblok';\n\nlet cmsApi: {\n  getAllSpeakers: () => Promise<Speaker[]>;\n  getAllStages: () => Promise<Stage[]>;\n  getAllSponsors: () => Promise<Sponsor[]>;\n  getAllJobs: () => Promise<Job[]>;\n};\n\nif (process.env.DATOCMS_READ_ONLY_API_TOKEN) {\n  cmsApi = datoCmsApi;\n} else if (process.env.CONTENTFUL_ACCESS_TOKEN && process.env.CONTENTFUL_SPACE_ID) {\n  cmsApi = contentfulApi;\n} else if (process.env.STORYBLOK_PREVIEW_TOKEN) {\n  cmsApi = storyblokApi;\n} else if (process.env.PRISMIC_REPO_ID) {\n  cmsApi = prismicApi;\n} else if (\n  process.env.AGILITY_GUID &&\n  process.env.AGILITY_API_FETCH_KEY &&\n  process.env.AGILITY_API_PREVIEW_KEY\n) {\n  cmsApi = agilityApi;\n} else {\n  cmsApi = {\n    getAllSpeakers: async () => [],\n    getAllStages: async () => [],\n    getAllSponsors: async () => [],\n    getAllJobs: async () => []\n  };\n}\n\nexport async function getAllSpeakers(): Promise<Speaker[]> {\n  return cmsApi.getAllSpeakers();\n}\n\nexport async function getAllStages(): Promise<Stage[]> {\n  return cmsApi.getAllStages();\n}\n\nexport async function getAllSponsors(): Promise<Sponsor[]> {\n  return cmsApi.getAllSponsors();\n}\n\nexport async function getAllJobs(): Promise<Job[]> {\n  return cmsApi.getAllJobs();\n}\n"]},"metadata":{},"sourceType":"module"}