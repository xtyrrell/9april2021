{"ast":null,"code":"import _defineProperty from \"/Users/shai/9april2021/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/Users/shai/9april2021/components/ticket-copy.tsx\",\n    _s = $RefreshSig$();\n\n/**\n * Copyright 2020 Vercel Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { useEffect, useState, useRef } from 'react';\nimport cn from 'classnames';\nimport { SITE_URL } from '@lib/constants';\nimport styleUtils from './utils.module.css';\nimport IconCopy from './icons/icon-copy';\nimport styles from './ticket-copy.module.css';\nexport default function TicketCopy(_ref) {\n  _s();\n\n  var username = _ref.username;\n\n  var _useState = useState(1),\n      fadeOpacity = _useState[0],\n      setFadeOpacity = _useState[1];\n\n  var _useState2 = useState(false),\n      scrolling = _useState2[0],\n      setScrolling = _useState2[1];\n\n  var _useState3 = useState(false),\n      copyEnabled = _useState3[0],\n      setCopyEnabled = _useState3[1];\n\n  var _useState4 = useState(false),\n      copied = _useState4[0],\n      setCopied = _useState4[1];\n\n  var scrollRef = useRef(null);\n  var buttonRef = useRef(null);\n  var url = \"\".concat(SITE_URL, \"/tickets/\").concat(username);\n  useEffect(function () {\n    if (navigator.clipboard && navigator.clipboard.writeText) {\n      setCopyEnabled(true);\n    }\n  }, []);\n\n  var copiedText = /*#__PURE__*/_jsxDEV(\"span\", {\n    className: cn(styles.copied, _defineProperty({}, styles.visible, copied)),\n    children: \"Copied!\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 43,\n    columnNumber: 5\n  }, this);\n\n  var copyButton = /*#__PURE__*/_jsxDEV(\"button\", {\n    type: \"button\",\n    className: styles['copy-button'],\n    ref: buttonRef,\n    onClick: function onClick() {\n      navigator.clipboard.writeText(url).then(function () {\n        setCopied(true);\n        setTimeout(function () {\n          setCopied(false);\n        }, 2000);\n      });\n    },\n    children: /*#__PURE__*/_jsxDEV(IconCopy, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 53,\n    columnNumber: 5\n  }, this);\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: cn(styles.wrapper, styleUtils.appear),\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: styles['label-wrapper'],\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles.label,\n        children: \"Your ticket URL:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: cn(styles['mobile-copy'], _defineProperty({}, styles['mobile-copy-disabled'], !copyEnabled)),\n        children: [copiedText, copyButton]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: cn(styles.field, _defineProperty({}, styles['desktop-copy-disabled'], !copyEnabled)),\n      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n        className: styles.url,\n        ref: scrollRef,\n        onScroll: function onScroll() {\n          if (!scrolling) {\n            setScrolling(true);\n            var animationFrame = requestAnimationFrame(function () {\n              var _scrollRef$current, _scrollRef$current2, _scrollRef$current3;\n\n              var scrollableWidth = (((_scrollRef$current = scrollRef.current) === null || _scrollRef$current === void 0 ? void 0 : _scrollRef$current.scrollWidth) || 0) - (((_scrollRef$current2 = scrollRef.current) === null || _scrollRef$current2 === void 0 ? void 0 : _scrollRef$current2.clientWidth) || 0);\n              setFadeOpacity((scrollableWidth - (((_scrollRef$current3 = scrollRef.current) === null || _scrollRef$current3 === void 0 ? void 0 : _scrollRef$current3.scrollLeft) || 0)) / (scrollableWidth || 1));\n              cancelAnimationFrame(animationFrame);\n              setScrolling(false);\n            });\n          }\n        },\n        children: url\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        className: cn(styles.fade, _defineProperty({}, styles['desktop-copy-disabled'], !copyEnabled)),\n        style: {\n          opacity: fadeOpacity\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: cn(styles['desktop-copy'], styleUtils['hide-on-mobile'], _defineProperty({}, styles['desktop-copy-disabled'], !copyEnabled)),\n        children: [copiedText, copyButton]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 71,\n    columnNumber: 5\n  }, this);\n}\n\n_s(TicketCopy, \"/HlfI+8FxPTaskaCpIqFCUR8jSg=\");\n\n_c = TicketCopy;\n\nvar _c;\n\n$RefreshReg$(_c, \"TicketCopy\");","map":{"version":3,"sources":["/Users/shai/9april2021/components/ticket-copy.tsx"],"names":["useEffect","useState","useRef","cn","SITE_URL","styleUtils","IconCopy","styles","TicketCopy","username","fadeOpacity","setFadeOpacity","scrolling","setScrolling","copyEnabled","setCopyEnabled","copied","setCopied","scrollRef","buttonRef","url","navigator","clipboard","writeText","copiedText","visible","copyButton","then","setTimeout","wrapper","appear","label","field","animationFrame","requestAnimationFrame","scrollableWidth","current","scrollWidth","clientWidth","scrollLeft","cancelAnimationFrame","fade","opacity"],"mappings":"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","sourcesContent":["/**\n * Copyright 2020 Vercel Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { useEffect, useState, useRef } from 'react';\nimport cn from 'classnames';\nimport { SITE_URL } from '@lib/constants';\nimport styleUtils from './utils.module.css';\nimport IconCopy from './icons/icon-copy';\nimport styles from './ticket-copy.module.css';\n\ntype Props = {\n  username: string;\n};\n\nexport default function TicketCopy({ username }: Props) {\n  const [fadeOpacity, setFadeOpacity] = useState(1);\n  const [scrolling, setScrolling] = useState(false);\n  const [copyEnabled, setCopyEnabled] = useState(false);\n  const [copied, setCopied] = useState(false);\n  const scrollRef = useRef<HTMLSpanElement>(null);\n  const buttonRef = useRef<HTMLButtonElement>(null);\n  const url = `${SITE_URL}/tickets/${username}`;\n  useEffect(() => {\n    if (navigator.clipboard && navigator.clipboard.writeText) {\n      setCopyEnabled(true);\n    }\n  }, []);\n\n  const copiedText = (\n    <span\n      className={cn(styles.copied, {\n        [styles.visible]: copied\n      })}\n    >\n      Copied!\n    </span>\n  );\n\n  const copyButton = (\n    <button\n      type=\"button\"\n      className={styles['copy-button']}\n      ref={buttonRef}\n      onClick={() => {\n        navigator.clipboard.writeText(url).then(() => {\n          setCopied(true);\n          setTimeout(() => {\n            setCopied(false);\n          }, 2000);\n        });\n      }}\n    >\n      <IconCopy />\n    </button>\n  );\n\n  return (\n    <div className={cn(styles.wrapper, styleUtils.appear)}>\n      <div className={styles['label-wrapper']}>\n        <div className={styles.label}>Your ticket URL:</div>\n        <div\n          className={cn(styles['mobile-copy'], {\n            [styles['mobile-copy-disabled']]: !copyEnabled\n          })}\n        >\n          {copiedText}\n          {copyButton}\n        </div>\n      </div>\n      <div\n        className={cn(styles.field, {\n          [styles['desktop-copy-disabled']]: !copyEnabled\n        })}\n      >\n        <span\n          className={styles.url}\n          ref={scrollRef}\n          onScroll={() => {\n            if (!scrolling) {\n              setScrolling(true);\n              const animationFrame = requestAnimationFrame(() => {\n                const scrollableWidth =\n                  (scrollRef.current?.scrollWidth || 0) - (scrollRef.current?.clientWidth || 0);\n                setFadeOpacity(\n                  (scrollableWidth - (scrollRef.current?.scrollLeft || 0)) / (scrollableWidth || 1)\n                );\n                cancelAnimationFrame(animationFrame);\n                setScrolling(false);\n              });\n            }\n          }}\n        >\n          {url}\n        </span>\n        <span\n          className={cn(styles.fade, {\n            [styles['desktop-copy-disabled']]: !copyEnabled\n          })}\n          style={{ opacity: fadeOpacity }}\n        />\n        <div\n          className={cn(styles['desktop-copy'], styleUtils['hide-on-mobile'], {\n            [styles['desktop-copy-disabled']]: !copyEnabled\n          })}\n        >\n          {copiedText}\n          {copyButton}\n        </div>\n      </div>\n    </div>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}