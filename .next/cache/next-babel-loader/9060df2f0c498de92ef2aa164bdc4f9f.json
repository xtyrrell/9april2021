{"ast":null,"code":"import _defineProperty from \"/Users/shai/9april2021/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/Users/shai/9april2021/components/ticket-actions.tsx\",\n    _s = $RefreshSig$();\n\n/**\n * Copyright 2020 Vercel Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { useState, useRef, useEffect } from 'react';\nimport cn from 'classnames';\nimport { SITE_URL, TWEET_TEXT } from '@lib/constants';\nimport IconTwitter from './icons/icon-twitter';\nimport IconLinkedin from './icons/icon-linkedin';\nimport IconDownload from './icons/icon-download';\nimport LoadingDots from './loading-dots';\nimport styleUtils from './utils.module.css';\nimport styles from './ticket-actions.module.css';\nexport default function TicketActions(_ref) {\n  _s();\n\n  var username = _ref.username;\n\n  var _useState = useState(false),\n      imgReady = _useState[0],\n      setImgReady = _useState[1];\n\n  var _useState2 = useState(false),\n      loading = _useState2[0],\n      setLoading = _useState2[1];\n\n  var downloadLink = useRef();\n  var permalink = encodeURIComponent(\"\".concat(SITE_URL, \"/tickets/\").concat(username));\n  var text = encodeURIComponent(TWEET_TEXT);\n  var tweetUrl = \"https://twitter.com/intent/tweet?url=\".concat(permalink, \"&via=vercel&text=\").concat(text);\n  var linkedInUrl = \"https://www.linkedin.com/sharing/share-offsite/?url=\".concat(permalink);\n  var downloadUrl = \"/api/ticket-images/\".concat(username);\n  useEffect(function () {\n    setImgReady(false);\n    var img = new Image();\n    img.src = downloadUrl;\n\n    img.onload = function () {\n      setImgReady(true);\n      setLoading(false);\n\n      if (downloadLink.current) {\n        downloadLink.current.click();\n        downloadLink.current = undefined;\n      }\n    };\n  }, [downloadUrl]);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"a\", {\n      className: cn(styles.button, styleUtils.appear, styles.first, 'icon-button'),\n      href: tweetUrl,\n      rel: \"noopener noreferrer\",\n      target: \"_blank\",\n      children: [/*#__PURE__*/_jsxDEV(IconTwitter, {\n        width: 24\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 9\n      }, this), \" Tweet it!\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n      className: cn(styles.button, styleUtils.appear, styles.second, 'icon-button', // LinkedIn Share widget doesnâ€™t work on mobile\n      styles['linkedin-button']),\n      href: linkedInUrl,\n      rel: \"noopener noreferrer\",\n      target: \"_blank\",\n      children: [/*#__PURE__*/_jsxDEV(IconLinkedin, {\n        width: 20\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 9\n      }, this), \" Share on LinkedIn\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n      className: cn(styles.button, styleUtils.appear, styles.third, 'icon-button', _defineProperty({}, styles.loading, loading)),\n      href: loading ? undefined : downloadUrl,\n      onClick: function onClick(e) {\n        if (imgReady) return;\n        e.preventDefault();\n        downloadLink.current = e.currentTarget; // Wait for the image download to finish\n\n        setLoading(true);\n      },\n      download: \"ticket.png\",\n      children: loading ? /*#__PURE__*/_jsxDEV(LoadingDots, {\n        size: 4\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(IconDownload, {\n          width: 24\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 101,\n          columnNumber: 13\n        }, this), \" Download\"]\n      }, void 0, true)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n}\n\n_s(TicketActions, \"XHkJa9o+b96M8xGEv8Fh0ZeMokM=\");\n\n_c = TicketActions;\n\nvar _c;\n\n$RefreshReg$(_c, \"TicketActions\");","map":{"version":3,"sources":["/Users/shai/9april2021/components/ticket-actions.tsx"],"names":["useState","useRef","useEffect","cn","SITE_URL","TWEET_TEXT","IconTwitter","IconLinkedin","IconDownload","LoadingDots","styleUtils","styles","TicketActions","username","imgReady","setImgReady","loading","setLoading","downloadLink","permalink","encodeURIComponent","text","tweetUrl","linkedInUrl","downloadUrl","img","Image","src","onload","current","click","undefined","button","appear","first","second","third","e","preventDefault","currentTarget"],"mappings":"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","sourcesContent":["/**\n * Copyright 2020 Vercel Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { useState, useRef, useEffect } from 'react';\nimport cn from 'classnames';\nimport { SITE_URL, TWEET_TEXT } from '@lib/constants';\nimport IconTwitter from './icons/icon-twitter';\nimport IconLinkedin from './icons/icon-linkedin';\nimport IconDownload from './icons/icon-download';\nimport LoadingDots from './loading-dots';\nimport styleUtils from './utils.module.css';\nimport styles from './ticket-actions.module.css';\n\ntype Props = {\n  username: string;\n};\n\nexport default function TicketActions({ username }: Props) {\n  const [imgReady, setImgReady] = useState(false);\n  const [loading, setLoading] = useState(false);\n  const downloadLink = useRef<HTMLAnchorElement>();\n  const permalink = encodeURIComponent(`${SITE_URL}/tickets/${username}`);\n  const text = encodeURIComponent(TWEET_TEXT);\n  const tweetUrl = `https://twitter.com/intent/tweet?url=${permalink}&via=vercel&text=${text}`;\n  const linkedInUrl = `https://www.linkedin.com/sharing/share-offsite/?url=${permalink}`;\n  const downloadUrl = `/api/ticket-images/${username}`;\n\n  useEffect(() => {\n    setImgReady(false);\n\n    const img = new Image();\n\n    img.src = downloadUrl;\n    img.onload = () => {\n      setImgReady(true);\n      setLoading(false);\n      if (downloadLink.current) {\n        downloadLink.current.click();\n        downloadLink.current = undefined;\n      }\n    };\n  }, [downloadUrl]);\n\n  return (\n    <>\n      <a\n        className={cn(styles.button, styleUtils.appear, styles.first, 'icon-button')}\n        href={tweetUrl}\n        rel=\"noopener noreferrer\"\n        target=\"_blank\"\n      >\n        <IconTwitter width={24} /> Tweet it!\n      </a>\n      <a\n        className={cn(\n          styles.button,\n          styleUtils.appear,\n          styles.second,\n          'icon-button',\n          // LinkedIn Share widget doesnâ€™t work on mobile\n          styles['linkedin-button']\n        )}\n        href={linkedInUrl}\n        rel=\"noopener noreferrer\"\n        target=\"_blank\"\n      >\n        <IconLinkedin width={20} /> Share on LinkedIn\n      </a>\n      <a\n        className={cn(styles.button, styleUtils.appear, styles.third, 'icon-button', {\n          [styles.loading]: loading\n        })}\n        href={loading ? undefined : downloadUrl}\n        onClick={e => {\n          if (imgReady) return;\n\n          e.preventDefault();\n          downloadLink.current = e.currentTarget;\n          // Wait for the image download to finish\n          setLoading(true);\n        }}\n        download=\"ticket.png\"\n      >\n        {loading ? (\n          <LoadingDots size={4} />\n        ) : (\n          <>\n            <IconDownload width={24} /> Download\n          </>\n        )}\n      </a>\n    </>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}