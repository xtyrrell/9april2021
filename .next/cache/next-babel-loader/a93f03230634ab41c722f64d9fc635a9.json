{"ast":null,"code":"import _regeneratorRuntime from \"/Users/shai/9april2021/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/shai/9april2021/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _defineProperty from \"/Users/shai/9april2021/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/Users/shai/9april2021/components/form.tsx\",\n    _s = $RefreshSig$();\n\n/**\n * Copyright 2020 Vercel Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { useState } from 'react';\nimport cn from 'classnames';\nimport useConfData from '@lib/hooks/use-conf-data';\nimport { useRouter } from 'next/router';\nimport FormError from '@lib/form-error';\nimport LoadingDots from './loading-dots';\nimport styleUtils from './utils.module.css';\nimport styles from './form.module.css';\nimport useEmailQueryParam from '@lib/hooks/use-email-query-param';\nimport { register } from '@lib/user-api';\nexport default function Form(_ref) {\n  _s();\n\n  var _cn2;\n\n  var sharePage = _ref.sharePage;\n\n  var _useState = useState(''),\n      email = _useState[0],\n      setEmail = _useState[1];\n\n  var _useState2 = useState(''),\n      errorMsg = _useState2[0],\n      setErrorMsg = _useState2[1];\n\n  var _useState3 = useState(false),\n      errorTryAgain = _useState3[0],\n      setErrorTryAgain = _useState3[1];\n\n  var _useState4 = useState(false),\n      focused = _useState4[0],\n      setFocused = _useState4[1];\n\n  var _useState5 = useState('default'),\n      formState = _useState5[0],\n      setFormState = _useState5[1];\n\n  var _useConfData = useConfData(),\n      setPageState = _useConfData.setPageState,\n      setUserData = _useConfData.setUserData;\n\n  var router = useRouter();\n  useEmailQueryParam('email', setEmail);\n  return formState === 'error' ? /*#__PURE__*/_jsxDEV(\"div\", {\n    className: cn(styles.form, _defineProperty({}, styles['share-page'], sharePage)),\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: styles['form-row'],\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: cn(styles['input-label'], styles.error),\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: cn(styles.input, styles['input-text']),\n          children: errorMsg\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 52,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"button\",\n          className: cn(styles.submit, styles.register, styles.error),\n          onClick: function onClick() {\n            setFormState('default');\n            setErrorTryAgain(true);\n          },\n          children: \"Try Again\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 53,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 45,\n    columnNumber: 5\n  }, this) : /*#__PURE__*/_jsxDEV(\"form\", {\n    className: cn(styles.form, (_cn2 = {}, _defineProperty(_cn2, styles['share-page'], sharePage), _defineProperty(_cn2, styleUtils.appear, !errorTryAgain), _defineProperty(_cn2, styleUtils['appear-fifth'], !errorTryAgain && !sharePage), _defineProperty(_cn2, styleUtils['appear-third'], !errorTryAgain && sharePage), _cn2)),\n    onSubmit: function onSubmit(e) {\n      if (formState === 'default') {\n        setFormState('loading');\n        register(email).then( /*#__PURE__*/function () {\n          var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(res) {\n            var data, params, queryString;\n            return _regeneratorRuntime.wrap(function _callee$(_context) {\n              while (1) {\n                switch (_context.prev = _context.next) {\n                  case 0:\n                    if (res.ok) {\n                      _context.next = 2;\n                      break;\n                    }\n\n                    throw new FormError(res);\n\n                  case 2:\n                    _context.next = 4;\n                    return res.json();\n\n                  case 4:\n                    data = _context.sent;\n                    params = {\n                      id: data.id,\n                      ticketNumber: data.ticketNumber,\n                      name: data.name,\n                      username: data.username\n                    };\n\n                    if (sharePage) {\n                      queryString = Object.keys(params).map(function (key) {\n                        return \"\".concat(encodeURIComponent(key), \"=\").concat(encodeURIComponent(params[key] || ''));\n                      }).join('&');\n                      router.replace(\"/?\".concat(queryString), '/');\n                    } else {\n                      setUserData(params);\n                      setPageState('ticket');\n                    }\n\n                  case 7:\n                  case \"end\":\n                    return _context.stop();\n                }\n              }\n            }, _callee);\n          }));\n\n          return function (_x) {\n            return _ref2.apply(this, arguments);\n          };\n        }())[\"catch\"]( /*#__PURE__*/function () {\n          var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(err) {\n            var message, _res$headers$get, _data$error, res, data;\n\n            return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n              while (1) {\n                switch (_context2.prev = _context2.next) {\n                  case 0:\n                    message = 'Error! Please try again.';\n\n                    if (!(err instanceof FormError)) {\n                      _context2.next = 12;\n                      break;\n                    }\n\n                    res = err.res;\n\n                    if (!((_res$headers$get = res.headers.get('Content-Type')) === null || _res$headers$get === void 0 ? void 0 : _res$headers$get.includes('application/json'))) {\n                      _context2.next = 9;\n                      break;\n                    }\n\n                    _context2.next = 6;\n                    return res.json();\n\n                  case 6:\n                    _context2.t0 = _context2.sent;\n                    _context2.next = 10;\n                    break;\n\n                  case 9:\n                    _context2.t0 = null;\n\n                  case 10:\n                    data = _context2.t0;\n\n                    if ((data === null || data === void 0 ? void 0 : (_data$error = data.error) === null || _data$error === void 0 ? void 0 : _data$error.code) === 'bad_email') {\n                      message = 'Please enter a valid email';\n                    }\n\n                  case 12:\n                    setErrorMsg(message);\n                    setFormState('error');\n\n                  case 14:\n                  case \"end\":\n                    return _context2.stop();\n                }\n              }\n            }, _callee2);\n          }));\n\n          return function (_x2) {\n            return _ref3.apply(this, arguments);\n          };\n        }());\n      } else {\n        setFormState('default');\n      }\n\n      e.preventDefault();\n    },\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: styles['form-row'],\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        htmlFor: \"email-input-field\",\n        className: cn(styles['input-label'], _defineProperty({}, styles.focused, focused)),\n        children: /*#__PURE__*/_jsxDEV(\"input\", {\n          className: styles.input,\n          autoComplete: \"off\",\n          type: \"email\",\n          id: \"email-input-field\",\n          value: email,\n          onChange: function onChange(e) {\n            return setEmail(e.target.value);\n          },\n          onFocus: function onFocus() {\n            return setFocused(true);\n          },\n          onBlur: function onBlur() {\n            return setFocused(false);\n          },\n          placeholder: \"Enter email to register free\",\n          \"aria-label\": \"Your email address\",\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 136,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        className: cn(styles.submit, styles.register, styles[formState]),\n        disabled: formState === 'loading',\n        children: formState === 'loading' ? /*#__PURE__*/_jsxDEV(LoadingDots, {\n          size: 4\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 155,\n          columnNumber: 38\n        }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: \"Register\"\n        }, void 0, false)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 67,\n    columnNumber: 5\n  }, this);\n}\n\n_s(Form, \"atfh6kVktIQ5XtKQEkMHLOzxWQY=\", false, function () {\n  return [useConfData, useRouter, useEmailQueryParam];\n});\n\n_c = Form;\n\nvar _c;\n\n$RefreshReg$(_c, \"Form\");","map":{"version":3,"sources":["/Users/shai/9april2021/components/form.tsx"],"names":["useState","cn","useConfData","useRouter","FormError","LoadingDots","styleUtils","styles","useEmailQueryParam","register","Form","sharePage","email","setEmail","errorMsg","setErrorMsg","errorTryAgain","setErrorTryAgain","focused","setFocused","formState","setFormState","setPageState","setUserData","router","form","error","input","submit","appear","e","then","res","ok","json","data","params","id","ticketNumber","name","username","queryString","Object","keys","map","key","encodeURIComponent","join","replace","err","message","headers","get","includes","code","preventDefault","target","value"],"mappings":"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","sourcesContent":["/**\n * Copyright 2020 Vercel Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { useState } from 'react';\nimport cn from 'classnames';\nimport useConfData from '@lib/hooks/use-conf-data';\nimport { useRouter } from 'next/router';\nimport FormError from '@lib/form-error';\nimport LoadingDots from './loading-dots';\nimport styleUtils from './utils.module.css';\nimport styles from './form.module.css';\nimport useEmailQueryParam from '@lib/hooks/use-email-query-param';\nimport { register } from '@lib/user-api';\n\ntype FormState = 'default' | 'loading' | 'error';\n\ntype Props = {\n  sharePage?: boolean;\n};\n\nexport default function Form({ sharePage }: Props) {\n  const [email, setEmail] = useState('');\n  const [errorMsg, setErrorMsg] = useState('');\n  const [errorTryAgain, setErrorTryAgain] = useState(false);\n  const [focused, setFocused] = useState(false);\n  const [formState, setFormState] = useState<FormState>('default');\n  const { setPageState, setUserData } = useConfData();\n  const router = useRouter();\n  useEmailQueryParam('email', setEmail);\n\n  return formState === 'error' ? (\n    <div\n      className={cn(styles.form, {\n        [styles['share-page']]: sharePage\n      })}\n    >\n      <div className={styles['form-row']}>\n        <div className={cn(styles['input-label'], styles.error)}>\n          <div className={cn(styles.input, styles['input-text'])}>{errorMsg}</div>\n          <button\n            type=\"button\"\n            className={cn(styles.submit, styles.register, styles.error)}\n            onClick={() => {\n              setFormState('default');\n              setErrorTryAgain(true);\n            }}\n          >\n            Try Again\n          </button>\n        </div>\n      </div>\n    </div>\n  ) : (\n    <form\n      className={cn(styles.form, {\n        [styles['share-page']]: sharePage,\n        [styleUtils.appear]: !errorTryAgain,\n        [styleUtils['appear-fifth']]: !errorTryAgain && !sharePage,\n        [styleUtils['appear-third']]: !errorTryAgain && sharePage\n      })}\n      onSubmit={e => {\n        if (formState === 'default') {\n          setFormState('loading');\n          register(email)\n            .then(async res => {\n              if (!res.ok) {\n                throw new FormError(res);\n              }\n\n              const data = await res.json();\n              const params = {\n                id: data.id,\n                ticketNumber: data.ticketNumber,\n                name: data.name,\n                username: data.username\n              };\n\n              if (sharePage) {\n                const queryString = Object.keys(params)\n                  .map(\n                    key =>\n                      `${encodeURIComponent(key)}=${encodeURIComponent(\n                        params[key as keyof typeof params] || ''\n                      )}`\n                  )\n                  .join('&');\n                router.replace(`/?${queryString}`, '/');\n              } else {\n                setUserData(params);\n                setPageState('ticket');\n              }\n            })\n            .catch(async err => {\n              let message = 'Error! Please try again.';\n\n              if (err instanceof FormError) {\n                const { res } = err;\n                const data = res.headers.get('Content-Type')?.includes('application/json')\n                  ? await res.json()\n                  : null;\n\n                if (data?.error?.code === 'bad_email') {\n                  message = 'Please enter a valid email';\n                }\n              }\n\n              setErrorMsg(message);\n              setFormState('error');\n            });\n        } else {\n          setFormState('default');\n        }\n        e.preventDefault();\n      }}\n    >\n      <div className={styles['form-row']}>\n        <label\n          htmlFor=\"email-input-field\"\n          className={cn(styles['input-label'], {\n            [styles.focused]: focused\n          })}\n        >\n          <input\n            className={styles.input}\n            autoComplete=\"off\"\n            type=\"email\"\n            id=\"email-input-field\"\n            value={email}\n            onChange={e => setEmail(e.target.value)}\n            onFocus={() => setFocused(true)}\n            onBlur={() => setFocused(false)}\n            placeholder=\"Enter email to register free\"\n            aria-label=\"Your email address\"\n            required\n          />\n        </label>\n        <button\n          type=\"submit\"\n          className={cn(styles.submit, styles.register, styles[formState])}\n          disabled={formState === 'loading'}\n        >\n          {formState === 'loading' ? <LoadingDots size={4} /> : <>Register</>}\n        </button>\n      </div>\n    </form>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}