{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/Users/shai/9april2021/components/ticket-copy.tsx\";\n\n/**\n * Copyright 2020 Vercel Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { useEffect, useState, useRef } from 'react';\nimport cn from 'classnames';\nimport { SITE_URL } from '@lib/constants';\nimport styleUtils from './utils.module.css';\nimport IconCopy from './icons/icon-copy';\nimport styles from './ticket-copy.module.css';\nexport default function TicketCopy({\n  username\n}) {\n  const {\n    0: fadeOpacity,\n    1: setFadeOpacity\n  } = useState(1);\n  const {\n    0: scrolling,\n    1: setScrolling\n  } = useState(false);\n  const {\n    0: copyEnabled,\n    1: setCopyEnabled\n  } = useState(false);\n  const {\n    0: copied,\n    1: setCopied\n  } = useState(false);\n  const scrollRef = useRef(null);\n  const buttonRef = useRef(null);\n  const url = `${SITE_URL}/tickets/${username}`;\n  useEffect(() => {\n    if (navigator.clipboard && navigator.clipboard.writeText) {\n      setCopyEnabled(true);\n    }\n  }, []);\n\n  const copiedText = /*#__PURE__*/_jsxDEV(\"span\", {\n    className: cn(styles.copied, {\n      [styles.visible]: copied\n    }),\n    children: \"Copied!\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 43,\n    columnNumber: 5\n  }, this);\n\n  const copyButton = /*#__PURE__*/_jsxDEV(\"button\", {\n    type: \"button\",\n    className: styles['copy-button'],\n    ref: buttonRef,\n    onClick: () => {\n      navigator.clipboard.writeText(url).then(() => {\n        setCopied(true);\n        setTimeout(() => {\n          setCopied(false);\n        }, 2000);\n      });\n    },\n    children: /*#__PURE__*/_jsxDEV(IconCopy, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 53,\n    columnNumber: 5\n  }, this);\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: cn(styles.wrapper, styleUtils.appear),\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: styles['label-wrapper'],\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles.label,\n        children: \"Your ticket URL:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: cn(styles['mobile-copy'], {\n          [styles['mobile-copy-disabled']]: !copyEnabled\n        }),\n        children: [copiedText, copyButton]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: cn(styles.field, {\n        [styles['desktop-copy-disabled']]: !copyEnabled\n      }),\n      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n        className: styles.url,\n        ref: scrollRef,\n        onScroll: () => {\n          if (!scrolling) {\n            setScrolling(true);\n            const animationFrame = requestAnimationFrame(() => {\n              var _scrollRef$current, _scrollRef$current2, _scrollRef$current3;\n\n              const scrollableWidth = (((_scrollRef$current = scrollRef.current) === null || _scrollRef$current === void 0 ? void 0 : _scrollRef$current.scrollWidth) || 0) - (((_scrollRef$current2 = scrollRef.current) === null || _scrollRef$current2 === void 0 ? void 0 : _scrollRef$current2.clientWidth) || 0);\n              setFadeOpacity((scrollableWidth - (((_scrollRef$current3 = scrollRef.current) === null || _scrollRef$current3 === void 0 ? void 0 : _scrollRef$current3.scrollLeft) || 0)) / (scrollableWidth || 1));\n              cancelAnimationFrame(animationFrame);\n              setScrolling(false);\n            });\n          }\n        },\n        children: url\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        className: cn(styles.fade, {\n          [styles['desktop-copy-disabled']]: !copyEnabled\n        }),\n        style: {\n          opacity: fadeOpacity\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: cn(styles['desktop-copy'], styleUtils['hide-on-mobile'], {\n          [styles['desktop-copy-disabled']]: !copyEnabled\n        }),\n        children: [copiedText, copyButton]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 71,\n    columnNumber: 5\n  }, this);\n}","map":{"version":3,"sources":["/Users/shai/9april2021/components/ticket-copy.tsx"],"names":["useEffect","useState","useRef","cn","SITE_URL","styleUtils","IconCopy","styles","TicketCopy","username","fadeOpacity","setFadeOpacity","scrolling","setScrolling","copyEnabled","setCopyEnabled","copied","setCopied","scrollRef","buttonRef","url","navigator","clipboard","writeText","copiedText","visible","copyButton","then","setTimeout","wrapper","appear","label","field","animationFrame","requestAnimationFrame","scrollableWidth","current","scrollWidth","clientWidth","scrollLeft","cancelAnimationFrame","fade","opacity"],"mappings":";;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA,SAASA,SAAT,EAAoBC,QAApB,EAA8BC,MAA9B,QAA4C,OAA5C;AACA,OAAOC,EAAP,MAAe,YAAf;AACA,SAASC,QAAT,QAAyB,gBAAzB;AACA,OAAOC,UAAP,MAAuB,oBAAvB;AACA,OAAOC,QAAP,MAAqB,mBAArB;AACA,OAAOC,MAAP,MAAmB,0BAAnB;AAMA,eAAe,SAASC,UAAT,CAAoB;AAAEC,EAAAA;AAAF,CAApB,EAAyC;AACtD,QAAM;AAAA,OAACC,WAAD;AAAA,OAAcC;AAAd,MAAgCV,QAAQ,CAAC,CAAD,CAA9C;AACA,QAAM;AAAA,OAACW,SAAD;AAAA,OAAYC;AAAZ,MAA4BZ,QAAQ,CAAC,KAAD,CAA1C;AACA,QAAM;AAAA,OAACa,WAAD;AAAA,OAAcC;AAAd,MAAgCd,QAAQ,CAAC,KAAD,CAA9C;AACA,QAAM;AAAA,OAACe,MAAD;AAAA,OAASC;AAAT,MAAsBhB,QAAQ,CAAC,KAAD,CAApC;AACA,QAAMiB,SAAS,GAAGhB,MAAM,CAAkB,IAAlB,CAAxB;AACA,QAAMiB,SAAS,GAAGjB,MAAM,CAAoB,IAApB,CAAxB;AACA,QAAMkB,GAAG,GAAI,GAAEhB,QAAS,YAAWK,QAAS,EAA5C;AACAT,EAAAA,SAAS,CAAC,MAAM;AACd,QAAIqB,SAAS,CAACC,SAAV,IAAuBD,SAAS,CAACC,SAAV,CAAoBC,SAA/C,EAA0D;AACxDR,MAAAA,cAAc,CAAC,IAAD,CAAd;AACD;AACF,GAJQ,EAIN,EAJM,CAAT;;AAMA,QAAMS,UAAU,gBACd;AACE,IAAA,SAAS,EAAErB,EAAE,CAACI,MAAM,CAACS,MAAR,EAAgB;AAC3B,OAACT,MAAM,CAACkB,OAAR,GAAkBT;AADS,KAAhB,CADf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UADF;;AAUA,QAAMU,UAAU,gBACd;AACE,IAAA,IAAI,EAAC,QADP;AAEE,IAAA,SAAS,EAAEnB,MAAM,CAAC,aAAD,CAFnB;AAGE,IAAA,GAAG,EAAEY,SAHP;AAIE,IAAA,OAAO,EAAE,MAAM;AACbE,MAAAA,SAAS,CAACC,SAAV,CAAoBC,SAApB,CAA8BH,GAA9B,EAAmCO,IAAnC,CAAwC,MAAM;AAC5CV,QAAAA,SAAS,CAAC,IAAD,CAAT;AACAW,QAAAA,UAAU,CAAC,MAAM;AACfX,UAAAA,SAAS,CAAC,KAAD,CAAT;AACD,SAFS,EAEP,IAFO,CAAV;AAGD,OALD;AAMD,KAXH;AAAA,2BAaE,QAAC,QAAD;AAAA;AAAA;AAAA;AAAA;AAbF;AAAA;AAAA;AAAA;AAAA,UADF;;AAkBA,sBACE;AAAK,IAAA,SAAS,EAAEd,EAAE,CAACI,MAAM,CAACsB,OAAR,EAAiBxB,UAAU,CAACyB,MAA5B,CAAlB;AAAA,4BACE;AAAK,MAAA,SAAS,EAAEvB,MAAM,CAAC,eAAD,CAAtB;AAAA,8BACE;AAAK,QAAA,SAAS,EAAEA,MAAM,CAACwB,KAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cADF,eAEE;AACE,QAAA,SAAS,EAAE5B,EAAE,CAACI,MAAM,CAAC,aAAD,CAAP,EAAwB;AACnC,WAACA,MAAM,CAAC,sBAAD,CAAP,GAAkC,CAACO;AADA,SAAxB,CADf;AAAA,mBAKGU,UALH,EAMGE,UANH;AAAA;AAAA;AAAA;AAAA;AAAA,cAFF;AAAA;AAAA;AAAA;AAAA;AAAA,YADF,eAYE;AACE,MAAA,SAAS,EAAEvB,EAAE,CAACI,MAAM,CAACyB,KAAR,EAAe;AAC1B,SAACzB,MAAM,CAAC,uBAAD,CAAP,GAAmC,CAACO;AADV,OAAf,CADf;AAAA,8BAKE;AACE,QAAA,SAAS,EAAEP,MAAM,CAACa,GADpB;AAEE,QAAA,GAAG,EAAEF,SAFP;AAGE,QAAA,QAAQ,EAAE,MAAM;AACd,cAAI,CAACN,SAAL,EAAgB;AACdC,YAAAA,YAAY,CAAC,IAAD,CAAZ;AACA,kBAAMoB,cAAc,GAAGC,qBAAqB,CAAC,MAAM;AAAA;;AACjD,oBAAMC,eAAe,GACnB,CAAC,uBAAAjB,SAAS,CAACkB,OAAV,0EAAmBC,WAAnB,KAAkC,CAAnC,KAAyC,wBAAAnB,SAAS,CAACkB,OAAV,4EAAmBE,WAAnB,KAAkC,CAA3E,CADF;AAEA3B,cAAAA,cAAc,CACZ,CAACwB,eAAe,IAAI,wBAAAjB,SAAS,CAACkB,OAAV,4EAAmBG,UAAnB,KAAiC,CAArC,CAAhB,KAA4DJ,eAAe,IAAI,CAA/E,CADY,CAAd;AAGAK,cAAAA,oBAAoB,CAACP,cAAD,CAApB;AACApB,cAAAA,YAAY,CAAC,KAAD,CAAZ;AACD,aAR2C,CAA5C;AASD;AACF,SAhBH;AAAA,kBAkBGO;AAlBH;AAAA;AAAA;AAAA;AAAA,cALF,eAyBE;AACE,QAAA,SAAS,EAAEjB,EAAE,CAACI,MAAM,CAACkC,IAAR,EAAc;AACzB,WAAClC,MAAM,CAAC,uBAAD,CAAP,GAAmC,CAACO;AADX,SAAd,CADf;AAIE,QAAA,KAAK,EAAE;AAAE4B,UAAAA,OAAO,EAAEhC;AAAX;AAJT;AAAA;AAAA;AAAA;AAAA,cAzBF,eA+BE;AACE,QAAA,SAAS,EAAEP,EAAE,CAACI,MAAM,CAAC,cAAD,CAAP,EAAyBF,UAAU,CAAC,gBAAD,CAAnC,EAAuD;AAClE,WAACE,MAAM,CAAC,uBAAD,CAAP,GAAmC,CAACO;AAD8B,SAAvD,CADf;AAAA,mBAKGU,UALH,EAMGE,UANH;AAAA;AAAA;AAAA;AAAA;AAAA,cA/BF;AAAA;AAAA;AAAA;AAAA;AAAA,YAZF;AAAA;AAAA;AAAA;AAAA;AAAA,UADF;AAuDD","sourcesContent":["/**\n * Copyright 2020 Vercel Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { useEffect, useState, useRef } from 'react';\nimport cn from 'classnames';\nimport { SITE_URL } from '@lib/constants';\nimport styleUtils from './utils.module.css';\nimport IconCopy from './icons/icon-copy';\nimport styles from './ticket-copy.module.css';\n\ntype Props = {\n  username: string;\n};\n\nexport default function TicketCopy({ username }: Props) {\n  const [fadeOpacity, setFadeOpacity] = useState(1);\n  const [scrolling, setScrolling] = useState(false);\n  const [copyEnabled, setCopyEnabled] = useState(false);\n  const [copied, setCopied] = useState(false);\n  const scrollRef = useRef<HTMLSpanElement>(null);\n  const buttonRef = useRef<HTMLButtonElement>(null);\n  const url = `${SITE_URL}/tickets/${username}`;\n  useEffect(() => {\n    if (navigator.clipboard && navigator.clipboard.writeText) {\n      setCopyEnabled(true);\n    }\n  }, []);\n\n  const copiedText = (\n    <span\n      className={cn(styles.copied, {\n        [styles.visible]: copied\n      })}\n    >\n      Copied!\n    </span>\n  );\n\n  const copyButton = (\n    <button\n      type=\"button\"\n      className={styles['copy-button']}\n      ref={buttonRef}\n      onClick={() => {\n        navigator.clipboard.writeText(url).then(() => {\n          setCopied(true);\n          setTimeout(() => {\n            setCopied(false);\n          }, 2000);\n        });\n      }}\n    >\n      <IconCopy />\n    </button>\n  );\n\n  return (\n    <div className={cn(styles.wrapper, styleUtils.appear)}>\n      <div className={styles['label-wrapper']}>\n        <div className={styles.label}>Your ticket URL:</div>\n        <div\n          className={cn(styles['mobile-copy'], {\n            [styles['mobile-copy-disabled']]: !copyEnabled\n          })}\n        >\n          {copiedText}\n          {copyButton}\n        </div>\n      </div>\n      <div\n        className={cn(styles.field, {\n          [styles['desktop-copy-disabled']]: !copyEnabled\n        })}\n      >\n        <span\n          className={styles.url}\n          ref={scrollRef}\n          onScroll={() => {\n            if (!scrolling) {\n              setScrolling(true);\n              const animationFrame = requestAnimationFrame(() => {\n                const scrollableWidth =\n                  (scrollRef.current?.scrollWidth || 0) - (scrollRef.current?.clientWidth || 0);\n                setFadeOpacity(\n                  (scrollableWidth - (scrollRef.current?.scrollLeft || 0)) / (scrollableWidth || 1)\n                );\n                cancelAnimationFrame(animationFrame);\n                setScrolling(false);\n              });\n            }\n          }}\n        >\n          {url}\n        </span>\n        <span\n          className={cn(styles.fade, {\n            [styles['desktop-copy-disabled']]: !copyEnabled\n          })}\n          style={{ opacity: fadeOpacity }}\n        />\n        <div\n          className={cn(styles['desktop-copy'], styleUtils['hide-on-mobile'], {\n            [styles['desktop-copy-disabled']]: !copyEnabled\n          })}\n        >\n          {copiedText}\n          {copyButton}\n        </div>\n      </div>\n    </div>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}